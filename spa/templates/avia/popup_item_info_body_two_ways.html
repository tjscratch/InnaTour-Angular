<div class="clearfix">
    <div class="b-ticket_2ways-block" ng-if="etapAgg.etapTo != null">
        <div class="rlf-part">
            <div class="rfl-column3">
                <div class="rlf-aviacompany">
                    <img ng-src="{{etapAgg.etapTo.TransporterCodeUrl}}" alt="">
                    {{etapAgg.etapTo.TransporterName}} <br>
                    рейс {{etapAgg.etapTo.Number}} <br>
                    {{etapAgg.etapTo.VehicleName}}
                </div>
            </div>
            <div class="b-tickets__container">
                <div class="b-tickets__block">
                    <div class="rlf-column1">
                        <div class="rlf-airport">{{etapAgg.etapTo.OutCode}}</div>
                    </div>
                    <div class="rlf-colum2">
                        <div class="rlf-flight-info">
                            <b>вылет {{etapAgg.etapTo.OutTimeFormatted}}</b>, {{etapAgg.etapTo.OutDateFormatted}} <br>
                            <span ng-if="etapAgg.etapTo.OutCity != etapAgg.etapTo.OutPort">{{etapAgg.etapTo.OutCity}}, {{etapAgg.etapTo.OutPort}}</span>
                            <span ng-if="etapAgg.etapTo.OutCity == etapAgg.etapTo.OutPort">{{etapAgg.etapTo.OutCity}}</span>
                        </div>
                    </div>
                </div>
                <div class="rlf-travel-time" ng-if="etapAgg.etapTo.WayTime > 0">{{etapAgg.etapTo.WayTimeFormatted}}</div>
                <div class="rlf-travel-time" ng-if="!(etapAgg.etapTo.WayTime > 0)">&nbsp;</div>
                <div class="b-tickets__block-rel">
                    <div class="rlf-column1-abs">
                        <div class="rlf-airport">{{etapAgg.etapTo.InCode}}</div>
                    </div>
                    <div class="rlf-colum2-m">
                        <div class="rlf-flight-info">
                            <b>прилет {{etapAgg.etapTo.InTimeFormatted}}</b>, {{etapAgg.etapTo.InDateFormatted}} <br>
                            <span ng-if="etapAgg.etapTo.InCity != etapAgg.etapTo.InPort">{{etapAgg.etapTo.InCity}}, {{etapAgg.etapTo.InPort}}</span>
                            <span ng-if="etapAgg.etapTo.InCity == etapAgg.etapTo.InPort">{{etapAgg.etapTo.InCity}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="b-ticket_2ways-block" ng-if="etapAgg.etapBack != null">
        <div class="rlf-part">
            <div class="rfl-column3">
                <div class="rlf-aviacompany">
                    <img ng-src="{{etapAgg.etapBack.TransporterCodeUrl}}" alt="">
                    {{etapAgg.etapBack.TransporterName}} <br>
                    рейс {{etapAgg.etapBack.Number}} <br>
                    {{etapAgg.etapBack.VehicleName}}
                </div>
            </div>
            <div class="b-tickets__container">
                <div class="b-tickets__block">
                    <div class="rlf-column1">
                        <div class="rlf-airport">{{etapAgg.etapBack.OutCode}}</div>
                    </div>
                    <div class="rlf-colum2">
                        <div class="rlf-flight-info">
                            <b>вылет {{etapAgg.etapBack.OutTimeFormatted}}</b>, {{etapAgg.etapBack.OutDateFormatted}} <br>
                            <span ng-if="etapAgg.etapBack.OutCity != etapAgg.etapBack.OutPort">{{etapAgg.etapBack.OutCity}}, {{etapAgg.etapBack.OutPort}}</span>
                            <span ng-if="etapAgg.etapBack.OutCity == etapAgg.etapBack.OutPort">{{etapAgg.etapBack.OutCity}}</span>
                        </div>
                    </div>
                </div>
                <div class="rlf-travel-time" ng-if="etapAgg.etapBack.WayTime > 0">{{etapAgg.etapBack.WayTimeFormatted}}</div>
                <div class="rlf-travel-time" ng-if="!(etapAgg.etapBack.WayTime > 0)">&nbsp;</div>
                <div class="b-tickets__block-rel">
                    <div class="rlf-column1-abs">
                        <div class="rlf-airport">{{etapAgg.etapBack.InCode}}</div>
                    </div>
                    <div class="rlf-colum2-m">
                        <div class="rlf-flight-info">
                            <b>прилет {{etapAgg.etapBack.InTimeFormatted}}</b>, {{etapAgg.etapBack.InDateFormatted}} <br>
                            <span ng-if="etapAgg.etapBack.InCity != etapAgg.etapBack.InPort">{{etapAgg.etapBack.InCity}}, {{etapAgg.etapBack.InPort}}</span>
                            <span ng-if="etapAgg.etapBack.InCity == etapAgg.etapBack.InPort">{{etapAgg.etapBack.InCity}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="clearfix">
    <div class="b-ticket_2ways-block" ng-if="etapAgg.etapTo != null && etapAgg.etapTo.nextEtapTo != null && !$last">
        <div class="rlf-part rlf-part_transfer">
            <div class="rlf-column1">
                <div class="rlf-airport">Пересадка</div>
                <div class="rlf-travel-time" ng-if="etapAgg.etapTo.WayTime > 0">{{etapAgg.etapTo.WaitTimeFormatted}}</div>
                <div class="rlf-travel-time" ng-if="!(etapAgg.etapTo.WayTime > 0)">&nbsp;</div>
            </div>
            <div class="rlf-colum4">
                <span ng-if="etapAgg.etapTo.NextOutCity != etapAgg.etapTo.NextOutPort">{{etapAgg.etapTo.NextOutCity}}, {{etapAgg.etapTo.NextOutPort}} ({{etapAgg.etapTo.NextOutCode}}), {{etapAgg.etapTo.NextOutCountryName}}</span>
                <span ng-if="etapAgg.etapTo.NextOutCity == etapAgg.etapTo.NextOutPort">{{etapAgg.etapTo.NextOutPort}} ({{etapAgg.etapTo.NextOutCode}}), {{etapAgg.etapTo.NextOutCountryName}}</span>
                <div class="rlf-transfer" ng-if="etapAgg.etapTo.InPortId != etapAgg.etapTo.NextOutPortId">Внимание: смена аэропорта!</div>
            </div>
        </div>
    </div>
    <div class="b-ticket_2ways-block" ng-if="etapAgg.etapBack != null && etapAgg.etapBack.nextEtapBack != null && !$last">
        <div class="rlf-part rlf-part_transfer">
            <div class="rlf-column1">
                <div class="rlf-airport">Пересадка</div>
                <div class="rlf-travel-time" ng-if="etapAgg.etapBack.WayTime > 0">{{etapAgg.etapBack.WaitTimeFormatted}}</div>
                <div class="rlf-travel-time" ng-if="!(etapAgg.etapBack.WayTime > 0)">&nbsp;</div>
            </div>
            <div class="rlf-colum4">
                <span ng-if="etapAgg.etapBack.NextOutCity != etapAgg.etapBack.NextOutPort">{{etapAgg.etapBack.NextOutCity}}, {{etapAgg.etapBack.NextOutPort}} ({{etapAgg.etapBack.NextOutCode}}), {{etapAgg.etapBack.NextOutCountryName}}</span>
                <span ng-if="etapAgg.etapBack.NextOutCity == etapAgg.etapBack.NextOutPort">{{etapAgg.etapBack.NextOutPort}} ({{etapAgg.etapBack.NextOutCode}}), {{etapAgg.etapBack.NextOutCountryName}}</span>
                <div class="rlf-transfer" ng-if="etapAgg.etapBack.InPortId != etapAgg.etapBack.NextOutPortId">Внимание: смена аэропорта!</div>
            </div>
        </div>
    </div>
</div>