<div class="recommend-bundle-container"
     ng-controller="DynamicPackageSERPRecommendedBundleCtrl"
     ng-class="{'recommend-bundle-container_short':display.isCurrent(display.SHORT)}">
    <div class="recommend-bundle">

        <div class="recommend-bundle-background" style="background-image: url(/spa/img/dp-background.jpg);"></div>

        <div class="recommend-bundle-wrap" ng-class="{'recommend-bundle-wrap_small': display.isCurrent(display.SHORT)}" inna-with="combination.ticket as ticket">
            <h3 class="recommend-bundle-title" ng-if="display.isCurrent(display.FULL)">Выбранный пакет <span
                    class="icon-crown icon-sprite-crown"></span></h3>

            <a href="javascript:void(0);" ng-if="display.isCurrent(display.FULL)" ng-click="display.toggle()" class="expand-collapse-link">
                <span class="icon-expand"></span> Свернуть
            </a>
            <a href="javascript:void(0);" ng-if="display.isCurrent(display.SHORT)" ng-click="display.toggle()" class="expand-collapse-link">
                <span class="icon-collapse"></span> Развернуть
            </a>

            <div ng-if="display.isCurrent(display.FULL) && combination.hotel && combination.ticket"
                 inna-dynamic-bundle
                 inna-dynamic-bundle-bundle="combination"
                 inna-dynamic-bundle-state="state"
                 inna-dynamic-bundle-ticket-details="getTicketDetails"
                 inna-dynamic-bundle-hotel-details="getHotelDetails"
                 inna-dynamic-bundle-with-reservation-button="true"></div>


            <div class="result-small" ng-if="display.isCurrent(display.SHORT)">
                <div class="result-small__cell col-cell-390">
                    <p class="flight">
                        <img class="flight__image" ng-src="{{airLogo( ticket.getEtaps('To')[0].data.TransporterCode )}}"
                             height=28
                             alt="">
                        <span class="white">{{ticket.data.OutCode}} – {{ticket.data.InCode}}, {{ticket.data.DepartureDate | date: 'd MMM'}},</span>

                        в пути: {{ticket.getDuration('To')}}, {{ticket.getEtaps('To').length - 1 | asQuantity:"пересадка":"пересадки":"пересадок":"прямой"}}
                    </p>
                    <p class="flight">
                        <img class="flight__image" ng-src="{{airLogo( ticket.getEtaps('Back')[0].data.TransporterCode )}}" height=28 alt="">
                        <span class="white">{{ticket.data.InCode}} – {{ticket.data.OutCode}}, {{ticket.data.BackDepartureDate | date: 'd MMM'}},</span>
                        в пути: {{ticket.getDuration('Back')}}, {{ticket.getEtaps('Back').length - 1 | asQuantity:"пересадка":"пересадки":"пересадок":"прямой"}}
                    </p>
                </div>
                <div class="result-small__cell col-cell-330">
                    <h3 class="hotel-info-name">
                        <span class="icon icon-star" ng-if="combination.hotel.data.Stars > 0"></span>
                        <span class="icon icon-star" ng-if="combination.hotel.data.Stars > 1"></span>
                        <span class="icon icon-star" ng-if="combination.hotel.data.Stars > 2"></span>
                        <span class="icon icon-star" ng-if="combination.hotel.data.Stars > 3"></span>
                        <span class="icon icon-star" ng-if="combination.hotel.data.Stars > 4"></span>
                        {{combination.hotel.data.HotelName}}
                    </h3>
                    <div class="hotel-info-date">
                        с {{combination.hotel.data.CheckIn | date: 'd MMM'}}
                        по {{combination.hotel.data.CheckOut | date: 'd MMM'}},
                        {{combination.hotel.data.NightCount | asQuantity:"ночь":"ночи":"ночей"}}</div>
                </div>
                <div class="result-small__cell">
                    <p class="corner-price">
                        {{combination.getFullPackagePrice()}} Р
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Переключаем фильтры на карте и на списке отелей -->
    <div class="filters__body">
        <!-- Показываем разные фильтры -->
        <ng:include src="'pages/dynamic/inc/serp.hotels.html__filters.html'" ng-if="!asMap && state.HOTELS_TAB"/>
        <ng:include src="'pages/dynamic/inc/serp.tickets.html__filters.html'" ng-if="!asMap && state.TICKETS_TAB"/>
        <ng:include src="'pages/dynamic/inc/serp.hotels.map__filters.html'" ng-if="asMap"/>
    </div>
</div>