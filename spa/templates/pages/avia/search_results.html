
<style type="text/css">
    .rl-buy-button {
        z-index: 100;
    }
</style>

<div class="results-body" style="padding-top: 140px;">
<!-- Search Results -->
<div class="results-container">

    <!-- Рекомендованный вариант -->
    <div class="results-list results-list_720" ng-if="recomendedItem != null">
        <ng:any ng-repeat="item in [recomendedItem] track by $index">
            <div class="rl-item">
                <div class="rl-item-separator"></div>
                <div class="rl-left">
                    <header class="rl-item-header">
                        <span class="rl-airline"><img ng-src="{{item.EtapsToTransporterCodeUrl}}" alt=""><span class="rl-airline-text">{{item.EtapsToTransporterName}}</span></span>
                        <span class="rl-airline"><img ng-src="{{item.EtapsBackTransporterCodeUrl}}" alt=""><span class="rl-airline-text">{{item.EtapsBackTransporterName}}</span></span>
                    </header>
                    <div class="rl-content">
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.DepartureTimeFormatted}}</b>, {{item.DepartureDateFormatted}}<br>
                                {{item.AirportFrom}} {{item.OutCode}}
                            </div>
                        </div>
                        <div class="rl-travel-time">в пути: {{item.TimeToFormatted}}<br><span ng-if="item.ToTransferCount > 0">{{item.ToTransferCount}} {{getTransferCountText(item.ToTransferCount)}}</span><span ng-if="item.ToTransferCount == 0">прямой</span></div>
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.ArrivalTimeFormatted}}</b>, {{item.ArrivalDateFormatted}}<br>
                                {{item.AirportTo}} {{item.InCode}}
                            </div>
                        </div>
                    </div>
                    <div class="rl-content" ng-if="item.EtapsBack.length > 0">
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.BackDepartureTimeFormatted}}</b>, {{item.BackDepartureDateFormatted}}<br>
                                {{item.AirportTo}} {{item.InCode}}
                            </div>
                        </div>
                        <div class="rl-travel-time">в пути: {{item.TimeBackFormatted}}<br><span ng-if="item.BackTransferCount > 0">{{item.BackTransferCount}} {{getTransferCountText(item.BackTransferCount)}}</span><span ng-if="item.BackTransferCount == 0">прямой</span></div>
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.BackArrivalTimeFormatted}}</b>, {{item.BackArrivalDateFormatted}}<br>
                                {{item.AirportFrom}} {{item.OutCode}}
                            </div>
                        </div>
                    </div>
                    <footer class="rl-footer">
                        <span class="rl-tickets-number">Последние 3 места</span>
                        <a href="javascript:void(0)" class="rl-more-info" ng-click="popupItemInfo.show($event, item)">Подробнее</a>
                    </footer>
                </div>
                <div class="rl-aside">
                    <span class="rl-rec">мы рекомендуем</span>
                    <span class="rl-price" ng-class="{'rl-price_1way':item.EtapsBack.length == 0}">
                        <span class="rl-price-item">{{item.Price | price}}</span> <span class="rub">Р</span>
                    </span>
                    <a href="#" class="rl-buy-button" ng-click="goToPaymentClick($event, item)">Купить</a>
                </div>
            </div>
        </ng:any>

    </div>

    <!-- Results Aside -->
    <!--<aside class="results-aside results-aside_mod">
        <div class="ra-best-block">
            <div class="ra-best-title">Перелет + Отель ★★★</div>
            <div class="ra-best-price">30 200 <span class="rub">P</span></div>
            <p class="ra-best-descr">по отдельности: <span class="ra-best-descr-info">110 600 <span class="rub">P</span></span>экономия: 20 000 <span class="rub">P</span></p>
            <a href="#" class="ra-best-select">ВЫБРАТЬ</a>
        </div>
    </aside>-->
    <!-- /Results Aside -->
</div>

<!-- Filters -->
<div class="filters__body">
    <div class="js-filter-scroll">
        <ul class="filters__container">
            <li filter-transfer list="filter.TransferCountListAgg">
            </li>
            <li filter-price ng-model="filter" init-min-value="filter.minPriceInitial" init-max-value="filter.maxPriceInitial" min-value="filter.minPrice" max-value="filter.maxPrice">
            </li>
            <li filter-time list="filter.time.list">
            </li>
            <li filter-aircompany list="filter.TransporterList">
            </li>
            <li filter-airport filter="filter.AirportFilter">
            </li>
            <li filter-sort sort="SortFilter">
            </li>
        </ul>
    </div>
</div>
<!-- /Filters -->

<div class="results-container results-container_top">

    <!-- Results List -->
    <div class="results-list results-list_720">
        <ng:any ng-repeat="item in visibleFilteredTicketsList | orderBy:SortFilter.sortType:SortFilter.reverse track by $index">
            <div class="rl-item">
                <div class="rl-item-separator"></div>
                <div class="rl-left">
                    <header class="rl-item-header">
                        <span class="rl-airline"><img ng-src="{{item.EtapsToTransporterCodeUrl}}" alt=""><span class="rl-airline-text">{{item.EtapsToTransporterName}}</span></span>
                        <span class="rl-airline"><img ng-src="{{item.EtapsBackTransporterCodeUrl}}" alt=""><span class="rl-airline-text">{{item.EtapsBackTransporterName}}</span></span>
                    </header>
                    <div class="rl-content">
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.DepartureTimeFormatted}}</b>, {{item.DepartureDateFormatted}}<br>
                                {{item.AirportFrom}} {{item.OutCode}}
                            </div>
                        </div>
                        <div class="rl-travel-time">в пути: {{item.TimeToFormatted}}<br><span ng-if="item.ToTransferCount > 0">{{item.ToTransferCount}} {{getTransferCountText(item.ToTransferCount)}}</span><span ng-if="item.ToTransferCount == 0">прямой</span></div>
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.ArrivalTimeFormatted}}</b>, {{item.ArrivalDateFormatted}}<br>
                                {{item.AirportTo}} {{item.InCode}}
                            </div>
                        </div>
                    </div>
                    <div class="rl-content" ng-if="item.EtapsBack.length > 0">
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.BackDepartureTimeFormatted}}</b>, {{item.BackDepartureDateFormatted}}<br>
                                {{item.AirportTo}} {{item.InCode}}
                            </div>
                        </div>
                        <div class="rl-travel-time">в пути: {{item.TimeBackFormatted}}<br><span ng-if="item.BackTransferCount > 0">{{item.BackTransferCount}} {{getTransferCountText(item.BackTransferCount)}}</span><span ng-if="item.BackTransferCount == 0">прямой</span></div>
                        <div class="rl-fly">
                            <div class="rlf-flight-info">
                                <b>{{item.BackArrivalTimeFormatted}}</b>, {{item.BackArrivalDateFormatted}}<br>
                                {{item.AirportFrom}} {{item.OutCode}}
                            </div>
                        </div>
                    </div>
                    <footer class="rl-footer">
                        <span class="rl-tickets-number">Последние 3 места</span>
                        <a href="javascritp:void(0)" class="rl-more-info" ng-click="popupItemInfo.show($event, item)">Подробнее</a>
                    </footer>
                </div>
                <div class="rl-aside">
                    <span class="rl-price" ng-class="{'rl-price_1way':item.EtapsBack.length == 0}">
                        <span class="rl-price-item">{{item.Price| price}}</span> <span class="rub">Р</span>
                    </span>
                    <a href="#" class="rl-buy-button" ng-click="goToPaymentClick($event, item)">Купить</a>
                </div>
            </div>
        </ng:any>
    </div>
    <!-- /Results List -->

    <!-- Results Aside -->
    <aside class="results-aside results-aside_mod">

        <div class="ra-tags-container">
            <h4 class="ra-tags-title" ng-show="ticketsList.length > 0"><b>{{getFilteredLength()}}</b> из <b>{{getLength()}}</b> перелетов</h4>
            <ul class="ra-tags-list">
                <li ng-if="filter.maxPrice < filter.maxPriceInitial">до {{filter.maxPrice | price}} <a ng-href="#" ng-click="resetPrice($event)"></a></li>
                <!--<li>Aeroflot <a href="#"></a></li>
                <li>Transaero <a href="#"></a></li>
                <li>Lufthansa <a href="#"></a></li>-->
                <!--<li>до 1 пересадки <a href="#"></a></li>-->
                <li ng-if="item.checked" ng-repeat="item in filter.TransferCountListAgg">{{item.name}} <a href="javascript:void(0)" ng-click="item.checked = false"></a></li>

                <li ng-if="item.checked" ng-repeat="item in filter.time.list">{{item.name}} <a href="javascript:void(0)" ng-click="item.checked = false"></a></li>
                <li ng-if="item.checked" ng-repeat="item in filter.TransporterList">{{item.TransporterName}} <a href="javascript:void(0)" ng-click="item.checked = false"></a></li>
                <li ng-if="item.checked" ng-repeat="item in filter.AirportFilter.fromPorts">{{item.name}} {{item.code}} <a href="javascript:void(0)" ng-click="item.checked = false"></a></li>
                <li ng-if="item.checked" ng-repeat="item in filter.AirportFilter.toPorts">{{item.name}} {{item.code}} <a href="javascript:void(0)" ng-click="item.checked = false"></a></li>
            </ul>
            <a href="#" ng-show="filter.maxPrice < filter.maxPriceInitial || anyChecked(filter.TransferCountListAgg) || anyChecked(filter.time.list) || anyChecked(filter.TransporterList)
               || anyChecked(filter.AirportFilter.fromPorts) || anyChecked(filter.AirportFilter.toPorts)"
               class="ra-tags-reset" ng-click="resetAll($event)">Сбросить все</a>
        </div>
    </aside>
    <!-- /Results Aside -->
</div>
<!-- Search Results -->
</div>

<!-- Baloon -->
<div style="display: block" class="overlay js-overlay" ng-show="popupItemInfo.isShow">
    <div class="balloon baloon_ticket baloon_2ticket">
        <ng:any ng-repeat="item in [popupItemInfo.item] track by $index">
            <div title="Закрыть" class="baloon-close" ng-click="popupItemInfo.isShow = false"></div>

            <h3 class="b-tickets__title">Подробная и информация по перелету</h3>
                <div class="rlf-oneway">
                    <div class="b-ticket_2ways">
                        <div class="rlf-fly" style="padding-bottom: 14px;">
                            <span class="rlf-city">{{item.AirportFrom}}</span> {{item.OutCode}}
                            <span class="rlf-fly-arrow rlf-fly-arrow_popup"></span>
                            <span class="rlf-city">{{item.AirportTo}}</span> {{item.InCode}}
                            <div class="rlf-full-travel-time"><span ng-if="item.ToTransferCount > 0">{{item.ToTransferCount}} {{getTransferCountText(item.ToTransferCount)}}</span><span ng-if="item.ToTransferCount == 0">прямой</span>, {{item.TimeToFormatted}} в пути</div>
                        </div>
                        <div class="rlf-fly" style="padding-bottom: 14px;">
                            <span class="rlf-city">{{item.AirportTo}}</span> {{item.InCode}}
                            <span class="rlf-fly-arrow"></span>
                            <span class="rlf-city">{{item.AirportFrom}}</span> {{item.OutCode}}
                            <div class="rlf-full-travel-time"><span ng-if="item.BackTransferCount > 0">{{item.BackTransferCount}} {{getTransferCountText(item.BackTransferCount)}}</span><span ng-if="item.BackTransferCount == 0">прямой</span>, {{item.TimeBackFormatted}} в пути</div>
                        </div>
                    </div>
                    <div class="b-ticket_2ways b-ticket_2ways-sep">
                        <div class="b-ticket_2ways-block">
                            <ng:any ng-repeat="etap in item.EtapsTo track by $index">
                                <div class="rlf-part">
                                    <div class="rfl-column3">
                                        <div class="rlf-aviacompany">
                                            <img ng-src="{{item.EtapsToTransporterCodeUrl}}" alt="" style="max-height: 25px; margin-bottom:5px !important;">
                                            {{etap.TransporterName}} <br>
                                            рейс {{etap.Number}} <br>
                                            {{etap.VehicleName}}
                                        </div>
                                    </div>
                                    <div class="b-tickets__container">
                                        <div class="b-tickets__block">
                                            <div class="rlf-column1">
                                                <div class="rlf-airport">{{etap.OutCode}}</div>
                                            </div>
                                            <div class="rlf-colum2">
                                                <div class="rlf-flight-info">
                                                    <b>вылет {{etap.OutTimeFormatted}}</b>, {{etap.OutDateFormatted}} <br>
                                                    {{etap.OutCity}}, {{etap.OutPort}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rlf-travel-time">{{etap.WayTimeFormatted}}</div>
                                        <div class="b-tickets__block">
                                            <div class="rlf-column1">
                                                <div class="rlf-airport"><br>{{etap.InCode}}</div>
                                            </div>
                                            <div class="rlf-colum2">
                                                <div class="rlf-flight-info">
                                                    <b>прилет {{etap.InTimeFormatted}}</b>, {{etap.InDateFormatted}} <br>
                                                    {{etap.InCity}}, {{etap.InPort}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="rlf-part rlf-part_transfer" ng-if="!$last">
                                    <div class="rlf-column1">
                                        <div class="rlf-airport">Пересадка</div>
                                        <div class="rlf-travel-time">{{etap.WaitTimeFormatted}}</div>
                                    </div>
                                    <div class="rlf-colum4">
                                        {{etap.NextOutCity}}, {{etap.NextOutPort}} ({{etap.NextOutCode}}), {{etap.NextOutCountryName}}
                                        <div class="rlf-transfer" ng-if="etap.InPortId != etap.NextOutPortId">Внимание: смена аэропорта!</div>
                                    </div>
                                </div>
                            </ng:any>
                        </div>
                        <div class="b-ticket_2ways-block">
                            <ng:any ng-repeat="etap in item.EtapsBack track by $index">
                                <div class="rlf-part">
                                    <div class="rfl-column3">
                                        <div class="rlf-aviacompany">
                                            <img ng-src="{{item.EtapsBackTransporterCodeUrl}}" alt="" style="max-height: 25px; margin-bottom: 5px !important;">
                                            {{etap.TransporterName}} <br>
                                            рейс {{etap.Number}} <br>
                                            {{etap.VehicleName}}
                                        </div>
                                    </div>
                                    <div class="b-tickets__container">
                                        <div class="b-tickets__block">
                                            <div class="rlf-column1">
                                                <div class="rlf-airport">{{etap.OutCode}}</div>
                                            </div>
                                            <div class="rlf-colum2">
                                                <div class="rlf-flight-info">
                                                    <b>вылет {{etap.OutTimeFormatted}}</b>, {{etap.OutDateFormatted}} <br>
                                                    {{etap.OutCity}}, {{etap.OutPort}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="rlf-travel-time">{{etap.WayTimeFormatted}}</div>
                                        <div class="b-tickets__block">
                                            <div class="rlf-column1">
                                                <div class="rlf-airport"><br>{{etap.InCode}}</div>
                                            </div>
                                            <div class="rlf-colum2">
                                                <div class="rlf-flight-info">
                                                    <b>прилет {{etap.InTimeFormatted}}</b>, {{etap.InDateFormatted}} <br>
                                                    {{etap.InCity}}, {{etap.InPort}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="rlf-part rlf-part_transfer" ng-if="!$last">
                                    <div class="rlf-column1">
                                        <div class="rlf-airport">Пересадка</div>
                                        <div class="rlf-travel-time">{{etap.WaitTimeFormatted}}</div>
                                    </div>
                                    <div class="rlf-colum4">
                                        {{etap.NextOutCity}}, {{etap.NextOutPort}} ({{etap.NextOutCode}}), {{etap.NextOutCountryName}}
                                        <div class="rlf-transfer" ng-if="etap.InPortId != etap.NextOutPortId">Внимание: смена аэропорта!</div>
                                    </div>
                                </div>
                            </ng:any>
                        </div>
                    </div>
                </div>
            <div class="b-tickets__footer">
                <ul class="b-tickets__icons">
                    <li><a href="#" class="b-tickets__icons-link"></a></li>
                    <li><a href="#" class="b-tickets__icons-print"></a></li>
                    <li><a href="#" class="b-tickets__icons-share"></a></li>
                </ul>
                <div class="b-tickets__footer-inner">
                    <div class="b-tickets__footer-price-block">
                        <div class="b-tickets__footer-price">{{item.Price| price}}</span> <span class="rub">Р</span></div>
                        <div class="b-tickets__footer-price-info">за {{popupItemInfo.ticketsCount}} {{helper.pluralForm(popupItemInfo.ticketsCount, 'билет', 'билета', 'билетов')}} {{popupItemInfo.ticketsClass}} класса</div>
                    </div>
                    <a class="rl-buy-button" href="javascript:void(0)" ng-click="goToPaymentClick($event, item)">Купить</a>
                </div>
            </div>

        </ng:any>
    </div>
</div>
<!-- /Baloon -->