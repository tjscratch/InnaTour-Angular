
<style type="text/css">
    .rl-buy-button {
        z-index: 100;
    }
</style>

<div class="results-body">
<!-- Search Results -->
<div class="results-container">

    <!-- Results List -->
    <div class="results-list">
        <header class="rl-header">
            <h3 class="rl-flights-number" ng-if="ticketsList.length > 0">{{filteredTicketsList.length}} из {{ticketsList.length}} рейсов</h3>
            <h3 class="rl-flights-number" ng-if="ticketsList.length == 0">рейсов не найдено</h3>
            <h3 class="rl-flights-number" ng-if="ticketsList == null">поиск рейсов...</h3>
            <div class="rl-filter">
                <div class="rl-filter-current" ng-click="isSortListOpened = !isSortListOpened">{{getCurrentSortName()}}</div>
                <ul class="rl-filter-menu" ng-show="isSortListOpened">
                    <ng:any ng-repeat="item in sortList">
                        <li ng-click="applySort($event, item.sort)" ng-show="isSortVisible(item.sort)">{{item.name}}</li>
                    </ng:any>
                </ul>
            </div>
        </header>

        <ng:any ng-repeat="item in filteredTicketsList | orderBy:sort:reverse">
        <!--<ng:any ng-repeat="item in filteredTicketsList">-->
            <div class="rl-title-best rl-title-cheapest" ng-show="item.isCheapest">самый дешевый</div>
            <div class="rl-title-best rl-title-recommended" ng-show="item.IsRecomendation && !item.isCheapest">мы рекомендуем</div>
            <div class="rl-item">
                <header class="rl-item-header">
                    <span class="rl-price">
                        <span class="rl-price-item">{{item.Price| price}}</span> руб.
                    </span>
                    <a href="#" class="rl-buy-button" ng-click="goToPaymentClick($event, item)">Купить</a>
                    <span class="rl-airline">{{item.TransporterListText}}</span>
                </header>
                <div class="rl-content">
                    <img ng-src="{{item.EtapsToTransporterCodeUrl}}" class="rl-airline-logo" alt="{{item.EtapsToTransporterName}}">
                    <div class="rl-fly">
                        <b class="rl-fly-time">{{item.DepartureTimeFormatted}}</b>  <span class="rl-airport" tooltip-title title="{{item.AirportFrom}} ({{item.OutCode}})">{{item.OutCode}}</span>
                        <div class="rl-fly-date">{{item.DepartureDateFormatted}}</div>
                    </div>
                    <div class="rl-travel-time">{{item.TimeToFormatted}}</div>
                    <div class="rl-fly">
                        <b class="rl-fly-time">{{item.ArrivalTimeFormatted}}</b>  <span class="rl-airport" tooltip-title title="{{item.AirportTo}} ({{item.InCode}})">{{item.InCode}}</span>
                        <div class="rl-fly-date">{{item.ArrivalDateFormatted}}</div>
                    </div>
                    <div class="rl-fly-type" ng-if="item.ToTransferCount > 0">
                        <div class="rl-fly-transplant">{{item.ToTransferCount}} {{getTransferCountText(item.ToTransferCount)}}</div>
                        <div class="rl-fly-transplant-time">
                            <span ng-repeat="etap in item.EtapsToItems">
                                <span tooltip-title title="{{etap.name}} ({{etap.code}})">{{etap.code}}</span> {{etap.waitTime}}<span ng-if="$last == false">, </span>
                            </span>
                        </div>
                    </div>
                    <div class="rl-fly-type" ng-if="item.ToTransferCount == 0">
                        <div class="rl-fly-transplant">Прямой</div>
                    </div>
                </div>
                <div class="rl-content" ng-if="item.EtapsBack.length > 0">
                    <img ng-src="{{item.EtapsBackTransporterCodeUrl}}" class="rl-airline-logo" alt="{{item.EtapsBackTransporterName}}">
                    <div class="rl-fly">
                        <b class="rl-fly-time">{{item.BackDepartureTimeFormatted}}</b>  <span class="rl-airport" tooltip-title title="{{item.AirportTo}} ({{item.InCode}})">{{item.InCode}}</span>
                        <div class="rl-fly-date">{{item.BackDepartureDateFormatted}}</div>
                    </div>
                    <div class="rl-travel-time">{{item.TimeBackFormatted}}</div>
                    <div class="rl-fly">
                        <b class="rl-fly-time">{{item.BackArrivalTimeFormatted}}</b>  <span class="rl-airport" tooltip-title title="{{item.AirportFrom}} ({{item.OutCode}})">{{item.OutCode}}</span>
                        <div class="rl-fly-date">{{item.BackArrivalDateFormatted}}</div>
                    </div>
                    <div class="rl-fly-type" ng-if="item.BackTransferCount > 0">
                        <div class="rl-fly-transplant">{{item.BackTransferCount}} {{getTransferCountText(item.BackTransferCount)}}</div>
                        <div class="rl-fly-transplant-time">
                            <span ng-repeat="etap in item.EtapsBackItems">
                                <span tooltip-title title="{{etap.name}} ({{etap.code}})">{{etap.code}}</span> {{etap.waitTime}}<span ng-if="$last == false">, </span>
                            </span>
                        </div>
                    </div>
                    <div class="rl-fly-type" ng-if="item.BackTransferCount == 0">
                        <div class="rl-fly-transplant">Прямой</div>
                    </div>
                </div>
                <footer class="rl-footer">
                    <a href="#" class="rl-more-info"><span>Подробнее</span></a>
                    <span class="rl-tickets-number">Последние 3 места</span>
                    <span class="rl-class">{{helper.getCabinClassName(item.CabineClass)}}</span>
                </footer>
            </div>
        </ng:any>

        <!--<div class="rl-item">
            <header class="rl-item-header">
                <span class="rl-price">
                    <span class="rl-price-item">69 450</span> руб.
                </span>
                <a href="#" class="rl-buy-button">Купить</a>
                <span class="rl-airline">British Airways / Aeroflot</span>
            </header>
            <div class="rl-content">
                <img src="spa/uploads/un.png" class="rl-airline-logo" alt="Aeroflot">
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title" title="Санта-Круз-де-Тенерифе Южный (TFS)">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-travel-time">2 ч 50 мин</div>
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title" title="Санта-Круз-де-Тенерифе Южный (TFS)">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-fly-type">
                    <div class="rl-fly-transplant">2 пересадки</div>
                    <div class="rl-fly-transplant-time">AMS 14 ч 35 мин, PAR 26 ч 45 мин</div>
                </div>
            </div>
            <div class="rl-content">
                <img src="spa/uploads/un.png" class="rl-airline-logo" alt="Aeroflot">
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title" title="Санта-Круз-де-Тенерифе Южный (TFS)">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-travel-time">2 ч 50 мин</div>
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title" title="Санта-Круз-де-Тенерифе Южный (TFS)">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-fly-type">
                    <div class="rl-fly-transplant">Прямой</div>
                </div>
            </div>
            <footer class="rl-footer">
                <a href="#" class="rl-more-info"><span>Подробнее</span></a>
                <span class="rl-tickets-number">Последние 3 места</span>
                <span class="rl-class">Эконом</span>
            </footer>
        </div>
        <div class="rl-item">
            <header class="rl-item-header">
                <span class="rl-price">
                    <span class="rl-price-item">69 450</span> руб.
                </span>
                <a href="#" class="rl-buy-button">Купить</a>
                <span class="rl-airline">British Airways / Aeroflot</span>
            </header>
            <div class="rl-content">
                <img src="spa/uploads/un.png" class="rl-airline-logo" alt="Aeroflot">
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-travel-time">2 ч 50 мин</div>
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-fly-type">
                    <div class="rl-fly-transplant">2 пересадки</div>
                    <div class="rl-fly-transplant-time">AMS 14 ч 35 мин, PAR 26 ч 45 мин</div>
                </div>
            </div>
            <footer class="rl-footer">
                <a href="#" class="rl-more-info"><span>Подробнее</span></a>
                <span class="rl-tickets-number">Последние 3 места</span>
                <span class="rl-class">Эконом</span>
            </footer>
        </div>
        <div class="rl-item rl-item-opened">
            <header class="rl-item-header">
                <span class="rl-price">
                    <span class="rl-price-item">69 450</span> руб.
                </span>
                <a href="#" class="rl-buy-button">Купить</a>
                <span class="rl-airline">British Airways / Aeroflot</span>
            </header>
            <div class="rl-content">
                <img src="spa/uploads/un.png" class="rl-airline-logo" alt="Aeroflot">
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-travel-time">2 ч 50 мин</div>
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-fly-type">
                    <div class="rl-fly-transplant">2 пересадки</div>
                    <div class="rl-fly-transplant-time">AMS 14 ч 35 мин, PAR 26 ч 45 мин</div>
                </div>
            </div>
            <div class="rl-content">
                <img src="spa/uploads/un.png" class="rl-airline-logo" alt="Aeroflot">
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-travel-time">2 ч 50 мин</div>
                <div class="rl-fly">
                    <b class="rl-fly-time">20:00</b>  <span class="rl-airport js-title">LED</span>
                    <div class="rl-fly-date">25 сентября 2014, пт</div>
                </div>
                <div class="rl-fly-type">
                    <div class="rl-fly-transplant">Прямой</div>
                </div>
            </div>
            <footer class="rl-footer">
                <a href="#" class="rl-more-info"><span>Свернуть</span></a>
                <span class="rl-tickets-number">Последние 3 места</span>
                <span class="rl-class">Эконом</span>
            </footer>
            <div class="rl-fullinfo">
                <div class="rlf-oneway">
                    <div class="rlf-fly">
                        <span class="rlf-city">Санкт-Петербург (LED)</span>
                        <span class="rlf-fly-arrow"></span>
                        <span class="rlf-city">Санта-Круз-де-Тенерифе (TFS)</span>
                        <div class="rlf-full-travel-time">2 пересадки, 23 ч 10 мин в пути</div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">LED-AMS</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum2">
                            <img src="spa/uploads/un.png" class="rlf-airline-logo" alt="Aeroflot">
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                        </div>
                        <div class="rfl-column3">
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                        </div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">Пересадка</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum4">
                            Амстердам, Схипхол (AMS), Нидерланды
                            <div class="rlf-transfer">Смена аэропорта. <br>Москва, Домодедово (DME), Россия</div>
                        </div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">LED-AMS</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum2">
                            <img src="spa/uploads/un.png" class="rlf-airline-logo" alt="Aeroflot">
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                        </div>
                        <div class="rfl-column3">
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                        </div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">Пересадка</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum4">
                            Амстердам, Схипхол (AMS), Нидерланды
                            <div class="rlf-transfer">Ночная стыковка</div>
                        </div>
                    </div>
                </div>
                <div class="rlf-oneway rlf-back">
                    <div class="rlf-fly">
                        <span class="rlf-city">Санкт-Петербург (LED)</span>
                        <span class="rlf-fly-arrow"></span>
                        <span class="rlf-city">Санта-Круз-де-Тенерифе (TFS)</span>
                        <div class="rlf-full-travel-time">2 пересадки, 23 ч 10 мин в пути</div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">LED-AMS</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum2">
                            <img src="spa/uploads/un.png" class="rlf-airline-logo" alt="Aeroflot">
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                        </div>
                        <div class="rfl-column3">
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                        </div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">Пересадка</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum4">
                            Амстердам, Схипхол (AMS), Нидерланды
                            <div class="rlf-transfer">Смена аэропорта. <br>Москва, Домодедово (DME), Россия</div>
                        </div>
                    </div>
                    <div class="rlf-part">
                        <div class="rlf-column1">
                            <div class="rlf-airport">LED-AMS</div>
                            <div class="rlf-travel-time">3 часа 30 минtут</div>
                        </div>
                        <div class="rlf-colum2">
                            <img src="spa/uploads/un.png" class="rlf-airline-logo" alt="Aeroflot">
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                            <div class="rlf-flight-info">
                                <div class="rlf-flight-time">20:00  25 сентября 2014</div>
                                <div class="rlf-flight-city">Санкт-Петербург, Пулково</div>
                            </div>
                        </div>
                        <div class="rfl-column3">
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                            <div class="rlf-aviacompany">
                                British Airways <br>
                                рейс 1023
                            </div>
                        </div>
                    </div>
                </div>
                <footer class="rl-footer">
                    <a href="#" class="rl-more-info"><span>Свернуть</span></a>
                </footer>
            </div>
        </div>-->
    </div>
    <!-- /Results List -->

    <!-- Results Aside Фильтры -->
    <aside class="results-aside">
        <div class="ra-block">
            <header class="ra-header">
                <h4 class="ra-title">Фильтр</h4>
                <a href="#" class="ra-header-link" ng-click="resetAll($event)">Сбросить все</a>
            </header>
        </div>
        <div class="ra-block">
            <header class="ra-header">
                <h4 class="ra-title">Стоимость</h4>
                <a href="#" class="ra-header-link" ng-click="resetPrice($event)">Сбросить</a>
            </header>
            <div class="ra-content">
                <div class="ra-trackbar" jq-ui-slider ng-model="filter" init-min-value="filter.minPriceInitial" init-max-value="filter.maxPriceInitial"
                     min-value="filter.minPrice" max-value="filter.maxPrice"></div>
                <div class="ra-amount-price" ng-show="filter.minPrice != null && filter.maxPrice != null">От {{filter.minPrice | price}} р. до {{filter.maxPrice| price}} р.</div>
            </div>
        </div>
        <div class="ra-block" ng-show="filter.TransferCountListAgg.length > 1">
            <header class="ra-header">
                <h4 class="ra-title">Пересадки</h4>
                <a href="#" class="ra-header-link" ng-click="resetTransfers($event)">Сбросить</a>
            </header>
            <div class="ra-content">
                <ul class="ra-fly-type-list">
                    <li ng-repeat="trAggItem in filter.TransferCountListAgg">
                        <label>
                            <input type="checkbox" name="fly" ng-model="trAggItem.checked" />
                            <span class="ra-checkbox"></span>
                            <span class="ra-fly-type">{{trAggItem.name}}</span>
                            <span class="ra-fly-price">{{trAggItem.price | price}} р.</span>
                        </label>
                    </li>
                </ul>
            </div>
        </div>
        <div class="ra-block">
            <header class="ra-header">
                <h4 class="ra-title">Время вылета</h4>
                <a href="#" class="ra-header-link" ng-click="resetDepartureTime($event)">Сбросить</a>
            </header>
            <div class="ra-content">
                <div class="ra-amount-time" ng-show="filter.minDepartureDate > 0 && filter.maxDepartureDate > 0">
                    Вылет: {{getCityFrom()}}<br />
                    {{getSliderTimeFormat(filter.minDepartureDate)}} - {{filter.maxDepartureDate | date:timeFormat}}
                </div>
                <div jq-ui-slider ng-model="filter"
                     init-min-value="filter.minDepartureDateInitial" init-max-value="filter.maxDepartureDateInitial"
                     min-value="filter.minDepartureDate" max-value="filter.maxDepartureDate"></div>
                <div class="ra-amount-time" ng-show="filter.minBackDepartureDate > 0 && filter.maxBackDepartureDate > 0">
                    Вылет: {{getCityTo()}}<br />
                    {{getSliderTimeFormat(filter.minBackDepartureDate)}} - {{filter.maxBackDepartureDate | date:timeFormat}}
                </div>
                <div jq-ui-slider ng-model="filter"
                     init-min-value="filter.minBackDepartureDateInitial" init-max-value="filter.maxBackDepartureDateInitial"
                     min-value="filter.minBackDepartureDate" max-value="filter.maxBackDepartureDate"></div>
            </div>
        </div>
        <div class="ra-block">
            <header class="ra-header">
                <h4 class="ra-title">Время посадки</h4>
                <a href="#" class="ra-header-link" ng-click="resetArrivalTime($event)">Сбросить</a>
            </header>
            <div class="ra-content">
                <div class="ra-amount-time" ng-show="filter.minArrivalDate > 0 && filter.maxArrivalDate > 0">
                    Вылет: {{getCityFrom()}}<br />
                    {{getSliderTimeFormat(filter.minArrivalDate)}} - {{filter.maxArrivalDate | date:timeFormat}}
                </div>
                <div jq-ui-slider ng-model="filter"
                     init-min-value="filter.minArrivalDateInitial" init-max-value="filter.maxArrivalDateInitial"
                     min-value="filter.minArrivalDate" max-value="filter.maxArrivalDate"></div>
                <div class="ra-amount-time" ng-show="filter.minBackArrivalDate > 0 && filter.maxBackArrivalDate > 0">
                    Вылет: {{getCityTo()}}<br />
                    {{getSliderTimeFormat(filter.minBackArrivalDate)}} - {{filter.maxBackArrivalDate | date:timeFormat}}
                </div>
                <div jq-ui-slider ng-model="filter"
                     init-min-value="filter.minBackArrivalDateInitial" init-max-value="filter.maxBackArrivalDateInitial"
                     min-value="filter.minBackArrivalDate" max-value="filter.maxBackArrivalDate"></div>
            </div>
        </div>
        <div class="ra-block" ng-show="filter.TransporterList.length > 1">
            <header class="ra-header">
                <h4 class="ra-title">Авиакомпании</h4>
                <a href="#" class="ra-header-link" ng-click="resetCompanies($event)">Сбросить</a>
            </header>
            <div class="ra-content">
                <ul class="ra-fly-type-list">
                    <li ng-repeat="item in filter.TransporterList">
                        <label>
                            <input type="checkbox" name="fly" ng-model="item.checked" />
                            <span class="ra-checkbox"></span>
                            <span class="ra-fly-type">{{item.TransporterName}}</span>
                        </label>
                    </li>
                </ul>
            </div>
        </div>
    </aside>
    <!-- /Results Aside -->

</div>
<!-- Search Results -->
</div>
